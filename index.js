var quizData = [
  
      {
        "question": "Quelle est la nation qui a remporté le plus grand nombre de titres de la CAN jusqu'à présent ?",
        "answers": [
          {"option": "Mali", "correct": false},
          {"option": "Nigeria", "correct": false},
          {"option": "Cameroun", "correct": false},
          {"option": "Égypte", "correct": true}
        ]
      },
      {
        "question": "En quelle année la première Coupe d'Afrique des Nations a-t-elle eu lieu ?",
        "answers": [
          {"option": "1963", "correct": false},
          {"option": "1957", "correct": true},
          {"option": "1970", "correct": false},
          {"option": "1952", "correct": false}
        ]
      },
      {
        "question": "Quel pays a accueilli la CAN 2019 ?",
        "answers": [
          {"option": "Cameroun", "correct": false},
          {"option": "Afrique du Sud", "correct": false},
          {"option": "Maroc", "correct": false},
          {"option": "Égypte", "correct": true}
        ]
      },
      {
        "question": "Quelle équipe a remporté la CAN 2021 ?",
        "answers": [
          {"option": "Maroc", "correct": false},
          {"option": "Algérie", "correct": false},
          {"option": "Sénégal", "correct": true},
          {"option": "Tunisie", "correct": false}
        ]
      },
      {
        "question": "Combien d'équipes participent généralement à la phase finale de la CAN ?",
        "answers": [
          {"option": "16", "correct": false},
          {"option": "20", "correct": false},
          {"option": "32", "correct": false},
          {"option": "24", "correct": true}
        ]
      },
      {
        "question": "Quel pays a remporté la CAN pour la première fois en 1992 ?",
        "answers": [
          {"option": "Côte d'Ivoire", "correct": true},
          {"option": "Ghana", "correct": false},
          {"option": "Nigeria", "correct": false},
          {"option": "Algérie", "correct": false}
        ]
      },
      {
        "question": "Quelle nation a accueilli la CAN pour la première fois en 1957 ?",
        "answers": [
          {"option": "Ghana", "correct": false},
          {"option": "Égypte", "correct": false},
          {"option": "Soudan", "correct": true},
          {"option": "Éthiopie", "correct": false}
        ]
      },
      {
        "question": "Quelle équipe nationale est surnommée \"les Éléphants\" et a remporté la CAN en 2015 ?",
        "answers": [
          {"option": "Côte d'Ivoire", "correct": true},
          {"option": "Cameroun", "correct": false},
          {"option": "Nigeria", "correct": false},
          {"option": "Ghana", "correct": false}
        ]
      },
      {
        "question": "Qui est l'entraîneur actuel de l'équipe nationale du Maroc ?",
        "answers": [
          {"option": "Didier Deschamps", "correct": false},
          {"option": "Badou Zaki", "correct": false},
          {"option": "Hervé Renard", "correct": false},
          {"option": "Vahid Halilhodži", "correct": true}
        ]
      },
      {
        "question": "À partir de quelle année la CAN a-t-elle eu lieu tous les deux ans au lieu de quatre ans?",
        "answers": [
          {"option": "2010", "correct": false},
          {"option": "2012", "correct": false},
          {"option": "2002", "correct": false},
          {"option": "2013", "correct": true}
        ]
      },
      {
        "question": "Quelle est la mascotte officielle de la CAN 2023 ?",
        "answers": [
          {"option": "Tut", "correct": false},
          {"option": "Chuku Chuku", "correct": false},
          {"option": "Akawba", "correct": true},
          {"option": "Palanquinha", "correct": false}
        ]
      },
      {
        "question": "Combien de groupes y a-t-il généralement dans la phase de groupes de la CAN ?",
        "answers": [
          {"option": "6", "correct": true},
          {"option": "8", "correct": false},
          {"option": "10", "correct": false},
          {"option": "7", "correct": false}
        ]
      },
      {
        "question": "Quelle équipe détient le record du plus grand nombre de participations à la CAN sans avoir remporté le titre ?",
        "answers": [
          {"option": "Angola", "correct": false},
          {"option": "Mali", "correct": true},
          {"option": "Soudan", "correct": false},
          {"option": "Gabon", "correct": false}
        ]
      },
      {
        "question": "En quelle année a été introduite la phase de groupes dans le format de la CAN ?",
        "answers": [
          {"option": "1957", "correct": false},
          {"option": "1964", "correct": false},
          {"option": "2013", "correct": false},
          {"option": "1992", "correct": true}
        ]
      },
      {
        "question": "Quelle équipe nationale est surnommée les \"Super Eagles\" ?",
        "answers": [
          {"option": "Nigeria", "correct": true},
          {"option": "California", "correct": false},
          {"option": "Burkina Faso", "correct": false},
          {"option": "Tanzanie", "correct": false}
        ]
      },
      {
        "question": "Quelle nation africaine a atteint les quarts de finale de la Coupe du Monde de la FIFA pour la première fois en 1990 ?",
        "answers": [
          {"option": "Guinée Équatoriale", "correct": false},
          {"option": "Éthiopie", "correct": false},
          {"option": "Cameroun", "correct": true},
          {"option": "Afrique du Sud", "correct": false}
        ]
      },
      {
        "question": "En quelle année l'Égypte a-t-elle accueilli la CAN pour la première fois ?",
        "answers": [
          {"option": "1959", "correct": true},
          {"option": "2006", "correct": false},
          {"option": "1986", "correct": false},
          {"option": "1974", "correct": false}
        ]
      },
      {
        "question": "Quelle équipe a été finaliste de la CAN 2004, mais a perdu face à la Tunisie ?",
        "answers": [
          {"option": "Sénégal", "correct": false},
          {"option": "Shining City", "correct": false},
          {"option": "Maroc", "correct": true},
          {"option": "Libye", "correct": false}
        ]
      },
      {
        "question": "Quel pays a organisé la CAN pour la première fois en 1962 ?",
        "answers": [
          {"option": "Égypte", "correct": false},
          {"option": "Ghana", "correct": false},
          {"option": "Soudan", "correct": false},
          {"option": "Éthiopie", "correct": true}
        ]
      },
      {
        "question": "Quel joueur ivoirien a remporté le Ballon d'Or Africain en 2015 après avoir mené son équipe à la victoire en 2015 ?",
        "answers": [
          {"option": "Yaya Touré", "correct": true},
          {"option": "Joel Tié", "correct": false},
          {"option": "Kolo Touré", "correct": false},
          {"option": "Didier Drogba", "correct": false}
        ]
      },
      {
        "question": "Quel ancien international égyptien a été l'entraîneur de l'équipe nationale d'Égypte lors de la CAN 2008 ?",
        "answers": [
          {"option": "Mahmoud El-Gohary", "correct": false},
          {"option": "Mohamed Salah", "correct": false},
          {"option": "Ahmed Hassan", "correct": false},
          {"option": "Hassan Shehata", "correct": true}
        ]
      },
      {
        "question": "Quel entraîneur a mené le Nigeria à la victoire lors de la CAN 1994, remportant ainsi son premier titre?",
        "answers": [
          {"option": "Paul Hamilton", "correct": false},
          {"option": "Clemens Westerhof", "correct": true},
          {"option": "Shaibu Amodu", "correct": false},
          {"option": "Gottlieb Göller", "correct": false}
        ]
      },
      {
        "question": "Qui était l'entraîneur de l'équipe du Sénégal lors de la CAN 2002, où ils ont atteint la finale pour la première fois?",
        "answers": [
          {"option": "Lamine N'Diaye", "correct": false},
          {"option": "Bruno Metsu", "correct": true},
          {"option": "Omar Daf", "correct": false},
          {"option": "Mbaye Leye", "correct": false}
        ]
      },
      {
        "question": "Qui était l'entraîneur de l'équipe nationale du Sénégal lors de la CAN 2019 remportée par l'Algérie ?",
        "answers": [
          {"option": "Clarence Seedorf", "correct": false},
          {"option": "Aliou Cissé", "correct": true},
          {"option": "Javier Aguirre", "correct": false},
          {"option": "Hervé Renard", "correct": false}
        ]
      },
      {
        "question": "Quel pays était dirigé par l'entraîneur Gernot Rohr lors de la CAN 2019 ?",
        "answers": [
          {"option": "Ghana", "correct": false},
          {"option": "Maroc", "correct": false},
          {"option": "Nigeria", "correct": true},
          {"option": "Cameroun", "correct": false}
        ]
      },
      {
        "question": "Hervé Renard a remporté la CAN avec deux équipes différentes. Lesquelles?",
        "answers": [
          {"option": "Algérie et Tunisie", "correct": false},
          {"option": "Égypte et Sénégal", "correct": false},
          {"option": "Côte d'Ivoire et Maroc", "correct": true},
          {"option": "Ghana et Nigeria", "correct": false}
        ]
      },
      {
        "question": "Qui était l'entraîneur de l'Égypte lors de la CAN 2017 ?",
        "answers": [
          {"option": "Javier Aguirre", "correct": false},
          {"option": "Aliou Cissé", "correct": false},
          {"option": "Hector Cuper", "correct": true},
          {"option": "Hervé Renard", "correct": false}
        ]
      },
      {
        "question": "Quel pays était entraîné par Florent Ibenge lors de la CAN 2019 ?",
        "answers": [
          {"option": "Gabon", "correct": false},
          {"option": "RDC (République démocratique du Congo)", "correct": true},
          {"option": "Mali", "correct": false},
          {"option": "Burkina Faso", "correct": false}
        ]
      }
    ]
 

var answerCheckedToday = false;

checkAndSetDailyCookie();
populateQuiz(quizData);

function populateQuiz(quizData) {
  var questionContainer = document.querySelector(".titre");
  var answerContainer = document.querySelector(".dfghjkl");

  var randomQuestion = quizData[Math.floor(Math.random() * quizData.length)];

  questionContainer.querySelector(".question").textContent = randomQuestion.question;

  answerContainer.innerHTML = "";
  var gridContainer = document.createElement("div");
  gridContainer.classList.add("grid-container");

  randomQuestion.answers.forEach(function (answer, index) {
    var gridItem = document.createElement("div");
    gridItem.classList.add("grid-item");

    var input = document.createElement("input");
    input.type = "radio";
    input.name = "q1";
    input.value = answer.option;
    input.id = "q1" + String.fromCharCode(97 + index);

    var label = document.createElement("label");
    label.htmlFor = input.id;
    label.id = input.id + "-label";
    label.textContent = answer.option;

    gridItem.appendChild(input);
    gridItem.appendChild(label);
    gridContainer.appendChild(gridItem);
  });

  answerContainer.appendChild(gridContainer);
}

function checkAndSetDailyCookie() {
  let lastPlayed = getCookie("lastPlayed");
  let hasPlayedToday = getCookie("hasPlayedToday");

  if (!lastPlayed) {
    // Si lastPlayed n'existe pas, c'est la première visite, donc définissez les cookies
    setCookie("lastPlayed", new Date().toISOString(), 1);
    setCookie("hasPlayedToday", "false", 1);
    populateQuiz(quizData);
    return;
  }

  let lastPlayedDate = new Date(lastPlayed);
  let now = new Date();

  if (
    now.getHours() === 0 && now.getMinutes() === 0 && now.getSeconds() === 0 &&
    (
      lastPlayedDate.getDate() !== now.getDate() ||
      lastPlayedDate.getMonth() !== now.getMonth() ||
      lastPlayedDate.getFullYear() !== now.getFullYear()
    )
  ) {
    // Réinitialisez le cookie et affichez une nouvelle question si la date a changé à minuit
    setCookie("lastPlayed", new Date().toISOString(), 1);
    setCookie("hasPlayedToday", "false", 1);
    answerCheckedToday = false;
    populateQuiz(quizData);
  } else if (hasPlayedToday === "true") {
    // Si l'utilisateur a déjà joué aujourd'hui, affichez le message d'alerte
    showAlert("Vous avez déjà joué aujourd'hui. Revenez demain pour un nouveau quiz !");
  }
}


function checkAnswerAndPlayAgainTomorrow() {
  if (answerCheckedToday) {
    showAlert("Vous avez déjà vérifié la réponse aujourd'hui. Revenez demain pour un nouveau quiz !");
    return;
  }

  var selectedAnswer = document.querySelector('input[name="q1"]:checked');
  if (!selectedAnswer) {
    showAlert("Veuillez sélectionner une réponse.");
    return;
  }

  var resultMessage = "";
  var labelId = selectedAnswer.id + "-label";
  var currentQuestion = document.querySelector(".titre .question").textContent;
  var currentQuizQuestion = quizData.find(question => question.question === currentQuestion);

  if (currentQuizQuestion && selectedAnswer.value === getCorrectAnswer(currentQuizQuestion)) {
    resultMessage = "Félicitations !!!  Rendez-vous demain à la même heure pour un nouveau Quiz.";
    showSuccessAlert(resultMessage);
  } else {
    resultMessage =
      "Désolé, ce n'est pas la bonne réponse. La bonne réponse est : " +
      getCorrectAnswer(currentQuizQuestion) +
      ". Rendez-vous demain pour un nouveau Quiz.";
    showAlert(resultMessage);
    document.getElementById(labelId).style.backgroundColor = "red";

    // Mettez en surbrillance la bonne réponse en vert
    var correctAnswerId = "q1" + String.fromCharCode(97 + currentQuizQuestion.answers.findIndex(answer => answer.correct));
    document.getElementById(correctAnswerId + "-label").style.backgroundColor = "green";
  }

  answerCheckedToday = true;
  setCookie("hasPlayedToday", "true", 1);

  animateQuizEnd();
  setCookie("lastPlayed", new Date().toISOString(), 1);
}


function getCorrectAnswer(question) {
  var correctAnswer = question.answers.find(answer => answer.correct);
  return correctAnswer ? correctAnswer.option : null;
}

function animateQuizEnd() {
  document.body.classList.add('quiz-ended');

  setTimeout(() => {
    document.body.classList.remove('quiz-ended');
  }, 2000);
}

function setCookie(name, value, expirationInDays) {
  let date = new Date();
  date.setTime(date.getTime() + (expirationInDays * 24 * 60 * 60 * 1000));
  let expires = "expires=" + date.toUTCString();
  document.cookie = name + "=" + value + ";" + expires + ";path=/";
}

function getCookie(name) {
  let nameEQ = name + "=";
  let ca = document.cookie.split(';');
  for (let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') c = c.substring(1, c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
  }
  return null;
}

function showAlert(message) {
  document.getElementById('custom-alert-message').innerText = message;
  document.getElementById('custom-alert').style.display = 'block';
}

function showSuccessAlert(message) {
  document.getElementById('custom-alert-message-success').innerText = message;
  document.getElementById('custom-alert-success').style.display = 'block';
}

function closeCustomAlert() {
  document.getElementById('custom-alert').style.display = 'none';
}

function closeCustomAlertSuccess() {
  document.getElementById('custom-alert-success').style.display = 'none';
}